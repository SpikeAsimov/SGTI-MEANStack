<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->

  <!-- Breadcrumbs -->
  <section class="content-header">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-6">
          <h4 class="m-0 text-black-50">
            <i class="fa fa-list-alt" id="icono" aria-hidden="true" style="color: #2d8cff;"></i>
            Gestión de trámites</h4>
        </div>
        <!-- Breadcrumb -->
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="#">Trámites</a></li>
            <li class="breadcrumb-item active">Gestión de trámites</li>
          </ol>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section>

  <hr>
  <section class="content">
    <div class="row">

      <div class="col-12 pl-4 pr-4">
        <div *ngIf="this.lsNotificacion" class="alert alert-success alert-dismissible fade show" role="alert">
          <strong>Proceso generado con exito!</strong> Total actualizados: {{datosProceso.totActualizados}}
          <button type="button" class="close" (click)="removeItem()" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
      </div>

        <div class="card card-primary card-outline">
          <div class="card-body">
             <div class="row">
               <div class="col-md-3">
                  <h5 class="text-muted">Ultima sincronización: <span style="color: black">{{datosProceso.createdAt | date: "dd/MM/yyyy | HH:MM:ss"}}</span></h5>
               </div>
               <div class="col-md-3">
                  <h5 class="text-muted">Total Procesados: <span style="color: black">{{datosProceso.totProcesados}}</span></h5>
               </div>
               <div class="col-md-3">
                  <h5 class="text-muted">Total Actualizados: <span style="color: black">{{datosProceso.totActualizados}}</span></h5>
               </div>
               <div class="col-md-3">
                  <button type="button" (click)="sincronizarPagos()" class="btn btn-success"><i class="fa fa-refresh" aria-hidden="true"></i> Sincronizar Pagos</button>
               </div>
             </div>
          </div>
        </div>

        <!--DataTable -->
        <div class="row p-2" data-aos="zoom-in" id="tableTramites">
          <div class="card card-primary card-outline col-12 pl-4 pr-4">
            <div class="card-header">
              <h3 class="card-title text-center">Listado de tramites generados</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body">
              <table id="example1" class="table table-bordered table-striped nowrap">
                <thead>
                  <tr>
                    <th scope="col" class="text-center">N°</th>
                    <th scope="col" class="text-center">Generado</th>
                    <th scope="col" class="text-center">Usuario</th>
                    <!--<th scope="col" class="text-center">Solicitante</th>-->
                    <th scope="col" class="text-center">Producto</th>
                    <!--<th scope="col" class="text-center">Descripción</th>-->
                    <th scope="col" class="text-center">Estado/Area</th>
                    <th scope="col" class="text-center">Editar</th>
                    <th scope="col" class="text-center">Estado Pago</th>
                    <th scope="col" class="text-center">Notificar</th>
                    <th scope="col" class="text-center">Formulario</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let minH of tramites; index as i">
                    <td class="text-center" scope="row">{{i+1}}</td>
                    <td class="text-center">{{minH.createdAt | date: "dd/MM/yyyy"}}</td>
                    <td class="text-center">{{minH.usuario.apellido}} {{minH.usuario.nombre}}</td>
                    <!--<td class="text-center">{{minH.apellido}} {{minH.nombre}}</td>-->
                    <td class="text-center">{{minH.producto.formulario}}</td>
                    <!--<td class="text-center">{{minH.tipoTram}}</td>
                    <td class="text-center">{{minH.area}}</td>-->
                    <td class="text-center">
                      <span *ngIf="minH.estadoTram == 'Iniciado'" class="badge bg-primary ml-1"
                        id="estado">{{minH.estadoTram}}</span>
                      <span *ngIf="minH.estadoTram == 'En proceso'" class="badge bg-warning ml-1"
                        id="estado">{{minH.estadoTram}}</span>
                      <span *ngIf="minH.estadoTram == 'Finalizado'" class="badge bg-success ml-1"
                        id="estado">{{minH.estadoTram}}</span>&nbsp;
                      <p>{{minH.area.nombre}}</p>
                    </td>
                    <td class="text-center">
                      <button type="button" class="btn btn-outline-primary" (click)="cargarModal(minH)" data-toggle="modal"
                          data-target="#exampleModal">
                          <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                      </button>
                    </td>
                    <td>
                      <span *ngIf="minH.comprobantePago.estado == 'approved'" class="badge bg-success ml-1"
                        id="estado">Aprobado</span>
                      <span *ngIf="minH.comprobantePago.estado == 'pending'" class="badge bg-warning ml-1"
                        id="estado">Pendiente</span>
                      <span *ngIf="minH.comprobantePago.estado == 'rejected'" class="badge bg-danger ml-1"
                        id="estado">Rechazado</span>
                      <span *ngIf="minH.comprobantePago.estado == 'cancelled'" class="badge bg-default ml-1"
                        id="estado">Cancelado</span>
                    </td>
                    <td class="text-center">
                      <a class="btn btn-outline-success" *ngIf="minH.estadoTram == 'Finalizado'"
                      href="https://api.whatsapp.com/send?phone=54{{minH.usuario.telefono}}&text=Hola%20{{minH.usuario.nombre}},%20Te%20informamos%20que%20ya%20puedes%20pasar%20por%20la%20institución%20a%20retirar%20tu%20tramite:%20{{minH.producto.formulario}}."><i
                      class="fa fa-whatsapp" aria-hidden="true"></i>
                      </a>&nbsp;
                      <p>{{minH.usuario.telefono}}</p>
                    </td>
                    <td *ngIf="minH.producto.formulario == 'Minuta G' else imprimeMinH"  class="text-center">
                      <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                         (click)="imprimirFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-outline-info"><i
                          class="fa fa-print"></i></a>&nbsp;
                      <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                         (click)="descargarFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-outline-danger"><i
                          class="fa fa-download" aria-hidden="true"></i></a>
                    </td>

                    <ng-template #imprimeMinH>
                      <td class="text-center">
                        <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                           (click)="imprimirFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-outline-info"><i
                          class="fa fa-print"></i></a>&nbsp;
                        <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                           (click)="descargarFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-outline-danger"><i
                          class="fa fa-download" aria-hidden="true"></i></a>
                      </td>
                    </ng-template>




                  </tr>
                </tbody>
              </table>
            </div>
            <!-- /.card-body -->
          </div>
        </div>
      </div>

      <!-- Cards -->
      <div class="row p-2" data-aos="zoom-in" id="cardsTramites">
          <div class="col-12">
            <div class="card">
              <div class="card-header p-0">
                <ul class="nav nav-pills row p-2">
                  <li class="nav-item col-4"><a class="nav-link active text-center" href="#tab_1"
                                                data-toggle="tab">Todos</a></li>
                  <li class="nav-item col-4"><a class="nav-link text-center" href="#tab_2" data-toggle="tab">En proceso</a>
                  </li>
                  <li class="nav-item col-4"><a class="nav-link text-center" href="#tab_3" data-toggle="tab">Finalizado</a>
                  </li>
                </ul>
              </div><!-- /.card-header -->
              <div class="card-body">
                <div class="tab-content">
                  <div class="tab-pane active" id="tab_1">
                    <div *ngFor="let minH of tramites; index as i">
                      <div *ngIf="minH.estadoTram == 'Iniciado'" class="row callout callout-info animate__animated animate__flipInX" style="border-left-color: #007bff !important;">
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Nro. de trámite:</strong> {{minH.codigo}}
                          </p>
                          <p class="text-muted">
                            <strong>Generado: </strong>
                            <span style="color: black;">{{minH.createdAt | date: "dd/MM/yyyy | HH:MM:ss"}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Usuario: </strong> <span style="color: black;">{{minH.usuario.apellido}} {{minH.usuario.nombre}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Producto: </strong> <span style="color: black;">{{minH.producto.formulario}}</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Iniciado'">
                            <strong>Estado tramite: </strong>
                            <span class="badge bg-primary ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'En proceso'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-warning ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Finalizado'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-success ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Area: </strong>
                            <span style="color: black;">{{minH.area.nombre}}</span>
                          </p>

                          <p class="text-muted"><strong>Estado Pago: </strong>
                            <span *ngIf="minH.comprobantePago.estado == 'approved'" class="badge bg-success ml-1"
                                  id="estado">Aprobado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'pending'" class="badge bg-warning ml-1"
                                  id="estado">Pendiente</span>
                            <span *ngIf="minH.comprobantePago.estado == 'rejected'" class="badge bg-danger ml-1"
                                  id="estado">Rechazado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'cancelled'" class="badge bg-default ml-1"
                                  id="estado">Cancelado</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Editar: </strong>
                          </p>
                          <p class="iconos-formulario">
                            <button type="button" class="btn btn-outline-primary" (click)="cargarModal(minH)" data-toggle="modal"
                                    data-target="#exampleModal">
                              <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </button>
                          </p>
                          <p class="text-muted">
                            <strong>Formulario: </strong>
                          </p>
                          <p class="iconos-formulario" *ngIf="minH.producto.formulario == 'Minuta G' else imprimeMinH">
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>

                          </p>

                          <ng-template #imprimeMinH>

                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>
                          </ng-template>


                          <div class="col-md-12 text-center" *ngIf="minH.estadoTram == 'Finalizado'">
                            <br>
                            <p class="text-center text-muted">
                              <strong>Notificar:</strong> {{minH.usuario.telefono}}
                              <a class="btn btn-success"
                                 href="https://api.whatsapp.com/send?phone=54{{minH.usuario.telefono}}&text=Hola%20{{minH.usuario.nombre}},%20Te%20informamos%20que%20ya%20puedes%20pasar%20por%20la%20institución%20a%20retirar%20tu%20tramite:%20{{minH.producto.formulario}}."><i
                                class="fa fa-whatsapp" aria-hidden="true"></i>
                              </a>&nbsp;
                            </p>
                          </div>



                        </div>
                      </div>
                      <div *ngIf="minH.estadoTram == 'En proceso'" class="row callout callout-warning animate__animated animate__flipInX">
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Nro. de trámite:</strong> {{minH.codigo}}
                          </p>
                          <p class="text-muted">
                            <strong>Generado: </strong>
                            <span style="color: black;">{{minH.createdAt | date: "dd/MM/yyyy | HH:MM:ss"}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Usuario: </strong> <span style="color: black;">{{minH.usuario.apellido}} {{minH.usuario.nombre}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Producto: </strong> <span style="color: black;">{{minH.producto.formulario}}</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Iniciado'">
                            <strong>Estado tramite: </strong>
                            <span class="badge bg-primary ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'En proceso'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-warning ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Finalizado'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-success ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Area: </strong>
                            <span style="color: black;">{{minH.area.nombre}}</span>
                          </p>

                          <p class="text-muted"><strong>Estado Pago: </strong>
                            <span *ngIf="minH.comprobantePago.estado == 'approved'" class="badge bg-success ml-1"
                                  id="estado">Aprobado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'pending'" class="badge bg-warning ml-1"
                                  id="estado">Pendiente</span>
                            <span *ngIf="minH.comprobantePago.estado == 'rejected'" class="badge bg-danger ml-1"
                                  id="estado">Rechazado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'cancelled'" class="badge bg-default ml-1"
                                  id="estado">Cancelado</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Editar: </strong>
                          </p>
                          <p class="iconos-formulario">
                            <button type="button" class="btn btn-outline-primary" (click)="cargarModal(minH)" data-toggle="modal"
                                    data-target="#exampleModal">
                              <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </button>
                          </p>
                          <p class="text-muted">
                            <strong>Formulario: </strong>
                          </p>
                          <p class="iconos-formulario" *ngIf="minH.producto.formulario == 'Minuta G' else imprimeMinH">
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>

                          </p>

                          <ng-template #imprimeMinH>

                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>
                          </ng-template>


                          <div class="col-md-12 text-center" *ngIf="minH.estadoTram == 'Finalizado'">
                            <br>
                            <p class="text-center text-muted">
                              <strong>Notificar:</strong> {{minH.usuario.telefono}}
                              <a class="btn btn-success"
                                 href="https://api.whatsapp.com/send?phone=54{{minH.usuario.telefono}}&text=Hola%20{{minH.usuario.nombre}},%20Te%20informamos%20que%20ya%20puedes%20pasar%20por%20la%20institución%20a%20retirar%20tu%20tramite:%20{{minH.producto.formulario}}."><i
                                class="fa fa-whatsapp" aria-hidden="true"></i>
                              </a>&nbsp;
                            </p>
                          </div>



                        </div>
                      </div>
                      <div *ngIf="minH.estadoTram == 'Finalizado'" class="row callout callout-success animate__animated animate__flipInX" style="border-left-color: #28a745 !important;">
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Nro. de trámite:</strong> {{minH.codigo}}
                          </p>
                          <p class="text-muted">
                            <strong>Generado: </strong>
                            <span style="color: black;">{{minH.createdAt | date: "dd/MM/yyyy | HH:MM:ss"}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Usuario: </strong> <span style="color: black;">{{minH.usuario.apellido}} {{minH.usuario.nombre}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Producto: </strong> <span style="color: black;">{{minH.producto.formulario}}</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Iniciado'">
                            <strong>Estado tramite: </strong>
                            <span class="badge bg-primary ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'En proceso'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-warning ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Finalizado'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-success ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Area: </strong>
                            <span style="color: black;">{{minH.area.nombre}}</span>
                          </p>

                          <p class="text-muted"><strong>Estado Pago: </strong>
                            <span *ngIf="minH.comprobantePago.estado == 'approved'" class="badge bg-success ml-1"
                                  id="estado">Aprobado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'pending'" class="badge bg-warning ml-1"
                                  id="estado">Pendiente</span>
                            <span *ngIf="minH.comprobantePago.estado == 'rejected'" class="badge bg-danger ml-1"
                                  id="estado">Rechazado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'cancelled'" class="badge bg-default ml-1"
                                  id="estado">Cancelado</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Editar: </strong>
                          </p>
                          <p class="iconos-formulario">
                            <button type="button" class="btn btn-outline-primary" (click)="cargarModal(minH)" data-toggle="modal"
                                    data-target="#exampleModal">
                              <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </button>
                          </p>
                          <p class="text-muted">
                            <strong>Formulario: </strong>
                          </p>
                          <p class="iconos-formulario" *ngIf="minH.producto.formulario == 'Minuta G' else imprimeMinH">
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinG(minH.tipoTram,
                                                     minH.objetoPedido,
                                                     minH.ubicacionInmueble,
                                                     minH.apellido,
                                                     minH.nombre,
                                                     minH.numDoc,
                                                     minH.estCivil,
                                                     minH.domicilio,
                                                     minH.usuario.apellido,
                                                     minH.usuario.nombre,
                                                     minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinG(minH.tipoTram,
                                                     minH.objetoPedido,
                                                     minH.ubicacionInmueble,
                                                     minH.apellido,
                                                     minH.nombre,
                                                     minH.numDoc,
                                                     minH.estCivil,
                                                     minH.domicilio,
                                                     minH.usuario.apellido,
                                                     minH.usuario.nombre,
                                                     minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>

                          </p>

                          <ng-template #imprimeMinH>

                              <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                                 (click)="imprimirFormularioMinH(minH.tipoTram,
                                                     minH.apellido,
                                                     minH.nombre,
                                                     minH.nacionalidad,
                                                     minH.estCivil,
                                                     minH.nomConyu,
                                                     minH.apeConyu,
                                                     minH.tipoDoc,
                                                     minH.numDoc,
                                                     minH.fechNac,
                                                     minH.usuario.apellido,
                                                     minH.usuario.nombre,
                                                     minH.usuario.telefono)" class="btn btn-info"><i
                                class="fa fa-print"></i></a>&nbsp;
                              <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                                 (click)="descargarFormularioMinH(minH.tipoTram,
                                                     minH.apellido,
                                                     minH.nombre,
                                                     minH.nacionalidad,
                                                     minH.estCivil,
                                                     minH.nomConyu,
                                                     minH.apeConyu,
                                                     minH.tipoDoc,
                                                     minH.numDoc,
                                                     minH.fechNac,
                                                     minH.usuario.apellido,
                                                     minH.usuario.nombre,
                                                     minH.usuario.telefono)" class="btn btn-danger"><i
                                class="fa fa-download" aria-hidden="true"></i></a>
                          </ng-template>


                          <div class="col-md-12 text-center" *ngIf="minH.estadoTram == 'Finalizado'">
                            <br>
                            <p class="text-center text-muted">
                              <strong>Notificar:</strong> {{minH.usuario.telefono}}
                              <a class="btn btn-success"
                                 href="https://api.whatsapp.com/send?phone=54{{minH.usuario.telefono}}&text=Hola%20{{minH.usuario.nombre}},%20Te%20informamos%20que%20ya%20puedes%20pasar%20por%20la%20institución%20a%20retirar%20tu%20tramite:%20{{minH.producto.formulario}}."><i
                                class="fa fa-whatsapp" aria-hidden="true"></i>
                              </a>&nbsp;
                            </p>
                          </div>



                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- /.tab-pane -->
                  <div class="tab-pane" id="tab_2">
                    <div *ngFor="let minH of tramites; index as i">
                      <div *ngIf="minH.estadoTram == 'En proceso'" class="row callout callout-warning animate__animated animate__flipInX">
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Nro. de trámite:</strong> {{minH.codigo}}
                          </p>
                          <p class="text-muted">
                            <strong>Generado: </strong>
                            <span style="color: black;">{{minH.createdAt | date: "dd/MM/yyyy | HH:MM:ss"}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Usuario: </strong> <span style="color: black;">{{minH.usuario.apellido}} {{minH.usuario.nombre}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Producto: </strong> <span style="color: black;">{{minH.producto.formulario}}</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Iniciado'">
                            <strong>Estado tramite: </strong>
                            <span class="badge bg-primary ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'En proceso'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-warning ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Finalizado'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-success ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Area: </strong>
                            <span style="color: black;">{{minH.area.nombre}}</span>
                          </p>

                          <p class="text-muted"><strong>Estado Pago: </strong>
                            <span *ngIf="minH.comprobantePago.estado == 'approved'" class="badge bg-success ml-1"
                                  id="estado">Aprobado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'pending'" class="badge bg-warning ml-1"
                                  id="estado">Pendiente</span>
                            <span *ngIf="minH.comprobantePago.estado == 'rejected'" class="badge bg-danger ml-1"
                                  id="estado">Rechazado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'cancelled'" class="badge bg-default ml-1"
                                  id="estado">Cancelado</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Editar: </strong>
                          </p>
                          <p class="iconos-formulario">
                            <button type="button" class="btn btn-outline-primary" (click)="cargarModal(minH)" data-toggle="modal"
                                    data-target="#exampleModal">
                              <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </button>
                          </p>
                          <p class="text-muted">
                            <strong>Formulario: </strong>
                          </p>
                          <p class="iconos-formulario" *ngIf="minH.producto.formulario == 'Minuta G' else imprimeMinH">
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>

                          </p>

                          <ng-template #imprimeMinH>

                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>
                          </ng-template>


                          <div class="col-md-12 text-center" *ngIf="minH.estadoTram == 'Finalizado'">
                            <br>
                            <p class="text-center text-muted">
                              <strong>Notificar:</strong> {{minH.usuario.telefono}}
                              <a class="btn btn-success"
                                 href="https://api.whatsapp.com/send?phone=54{{minH.usuario.telefono}}&text=Hola%20{{minH.usuario.nombre}},%20Te%20informamos%20que%20ya%20puedes%20pasar%20por%20la%20institución%20a%20retirar%20tu%20tramite:%20{{minH.producto.formulario}}."><i
                                class="fa fa-whatsapp" aria-hidden="true"></i>
                              </a>&nbsp;
                            </p>
                          </div>



                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- /.tab-pane -->
                  <div class="tab-pane" id="tab_3">
                    <div *ngFor="let minH of tramites; index as i">
                      <div *ngIf="minH.estadoTram == 'Finalizado'" class="row callout callout-success animate__animated animate__flipInX" style="border-left-color: #28a745 !important;">
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Nro. de trámite:</strong> {{minH.codigo}}
                          </p>
                          <p class="text-muted">
                            <strong>Generado: </strong>
                            <span style="color: black;">{{minH.createdAt | date: "dd/MM/yyyy | HH:MM:ss"}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Usuario: </strong> <span style="color: black;">{{minH.usuario.apellido}} {{minH.usuario.nombre}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Producto: </strong> <span style="color: black;">{{minH.producto.formulario}}</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Iniciado'">
                            <strong>Estado tramite: </strong>
                            <span class="badge bg-primary ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'En proceso'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-warning ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted" *ngIf="minH.estadoTram == 'Finalizado'">
                            <strong>Estado tramite:</strong>
                            <span class="badge bg-success ml-1" id="estado">{{minH.estadoTram}}</span>
                          </p>
                          <p class="text-muted">
                            <strong>Area: </strong>
                            <span style="color: black;">{{minH.area.nombre}}</span>
                          </p>

                          <p class="text-muted"><strong>Estado Pago: </strong>
                            <span *ngIf="minH.comprobantePago.estado == 'approved'" class="badge bg-success ml-1"
                                  id="estado">Aprobado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'pending'" class="badge bg-warning ml-1"
                                  id="estado">Pendiente</span>
                            <span *ngIf="minH.comprobantePago.estado == 'rejected'" class="badge bg-danger ml-1"
                                  id="estado">Rechazado</span>
                            <span *ngIf="minH.comprobantePago.estado == 'cancelled'" class="badge bg-default ml-1"
                                  id="estado">Cancelado</span>
                          </p>
                        </div>
                        <div class="col-md-4 text-center">
                          <p class="text-muted">
                            <strong>Editar: </strong>
                          </p>
                          <p class="iconos-formulario">
                            <button type="button" class="btn btn-outline-primary" (click)="cargarModal(minH)" data-toggle="modal"
                                    data-target="#exampleModal">
                              <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </button>
                          </p>
                          <p class="text-muted">
                            <strong>Formulario: </strong>
                          </p>
                          <p class="iconos-formulario" *ngIf="minH.producto.formulario == 'Minuta G' else imprimeMinH">
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinG(minH.tipoTram,
                                                         minH.objetoPedido,
                                                         minH.ubicacionInmueble,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.numDoc,
                                                         minH.estCivil,
                                                         minH.domicilio,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>

                          </p>

                          <ng-template #imprimeMinH>

                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Imprimir"
                               (click)="imprimirFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-info"><i
                              class="fa fa-print"></i></a>&nbsp;
                            <a href="javascript:void(0)" data-toggle="tooltip" data-placement="bottom" title="Descargar"
                               (click)="descargarFormularioMinH(minH.tipoTram,
                                                         minH.apellido,
                                                         minH.nombre,
                                                         minH.nacionalidad,
                                                         minH.estCivil,
                                                         minH.nomConyu,
                                                         minH.apeConyu,
                                                         minH.tipoDoc,
                                                         minH.numDoc,
                                                         minH.fechNac,
                                                         minH.usuario.apellido,
                                                         minH.usuario.nombre,
                                                         minH.usuario.telefono)" class="btn btn-danger"><i
                              class="fa fa-download" aria-hidden="true"></i></a>
                          </ng-template>


                          <div class="col-md-12 text-center" *ngIf="minH.estadoTram == 'Finalizado'">
                            <br>
                            <p class="text-center text-muted">
                              <strong>Notificar:</strong> {{minH.usuario.telefono}}
                              <a class="btn btn-success"
                                 href="https://api.whatsapp.com/send?phone=54{{minH.usuario.telefono}}&text=Hola%20{{minH.usuario.nombre}},%20Te%20informamos%20que%20ya%20puedes%20pasar%20por%20la%20institución%20a%20retirar%20tu%20tramite:%20{{minH.producto.formulario}}."><i
                                class="fa fa-whatsapp" aria-hidden="true"></i>
                              </a>&nbsp;
                            </p>
                          </div>



                        </div>
                      </div>
                    </div>
                  </div>
                  <!-- /.tab-pane -->
                </div>
                <!-- /.tab-content -->
              </div><!-- /.card-body -->

            </div>
          </div>
      </div>
      </div>
  </section>
</div>
<app-edit-tramites></app-edit-tramites>
<script>
  $(function () {
    $('#example1').DataTable({
      "paging": true,
      "lengthChange": true[5, 10, 20, 50, 100, 200, 500],
      "searching": true,
      "ordering": true,
      "info": true,
      "autoWidth": true,
      "responsive": true
    })
  });
</script>
